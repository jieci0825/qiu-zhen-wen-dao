---
title: 为什么需要 VNode
---

# 为什么需要 VNode

## 概述

主要是存在两个原因：

- **数据和界面进行对应**：
    当数据变化的时候，需要去正确的渲染页面，使用原生 js 就是直接根据数据操作真是 DOM 即可，而这就发生了一个问题，数据和页面如何才能对应，数据和元素存在多对多的关系，一个数据可以被多个元素使用，一个元素可以使用多个数据，那么作为一个通用框架的话，就很难预知到数据修改时，应该修改那块界面，由于不知道，就只能**全部重新渲染**，但是实际改动可能只有某一个小小的区域，这种全部重新渲染**操作真实 DOM** 的方式就会变得很昂贵。
    
    所以**为了减少对真实 DOM 的操作**，不得不引入了 VNode；引入了 VNode 之后，也无法避免这个问题，不过都是全量生成的话，生成 VNode 这种普通对象，进行对比（且对比的效率可以进行各种手段的优化）之后，再去改动实际需要改动的真实 DOM 就会相对而言效率更加的高效，换而言之，是一种不得已而为之的挽救措施。

- **抽象层**：因为要实现界面的驱动，这个界面可能是页面，也有可能是客户端、小程序等等平台，那么 dom 是只有浏览器环境中才有的，其他平台就不一样了，所以为了消除平台之间的差异，才**抽象了一个UI的表示式**，比如 VNode 就是使用一个普通对象来表达这个 UI 界面，然后根据不同的平台通过这个**普通对象**来生成具体的界面，也就是**跨平台**。

基于这两个原因，才有了 VNode。

## 扩展 - 什么是 VNode

VNode 的本质就是一个个的普通对象，用于**描述视图界面的结构**。

在 Vue 中，每个组件都有一个 render 函数，每个 render 函数都会返回一个虚拟 DOM 树，这就是说每个组件都对应一颗虚拟 DOM 树
