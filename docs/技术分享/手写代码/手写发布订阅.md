---
title: 手写发布订阅
---

# 手写发布订阅
```js
class EventListener {
	constructor() {
		this.handles = {}
	}

	emit(eventName, ...args) {
		if (!this._hasHandlesProp(eventName)) return
		this.handles[eventName].forEach(func => {
			func(...args)
		})
	}

	on(eventName, callback) {
		this.handles[eventName] = this.handles[eventName] || []
		this.handles[eventName].push(callback)
	}

	off(eventName, fn) {
		if (!this._hasHandlesProp(eventName)) return
		const handles = fn ? this.handles[eventName].filter(item => item !== fn) : []
		this.handles[eventName] = handles
	}

	_hasHandlesProp(propName) {
		return this.handles.hasOwnProperty(propName)
	}
}
```

